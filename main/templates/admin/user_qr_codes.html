{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block content %}
<div id="content-main">
    <div class="module aligned">
        <h2>{% trans 'User QR Codes' %}</h2>
        <div class="form-row">
            <div class="fieldBox">
                <label>{% trans 'User' %}:</label>
                <div class="readonly">{{ user }}</div>
            </div>
        </div>
        <div class="form-row">
            <div class="fieldBox">
                <label>{% trans 'Phone Number' %}:</label>
                <div class="readonly">{{ user.phone_number }}</div>
            </div>
        </div>
        <div class="form-row">
            <div class="fieldBox">
                <label>{% trans 'UUID' %}:</label>
                <div class="readonly">{{ user.id }}</div>
            </div>
        </div>
    </div>

    <div class="module aligned" style="margin-top: 20px;">
        <h2>{% trans 'QR Codes' %}</h2>
        <div style="display: flex; flex-wrap: wrap; gap: 40px; padding: 20px;">
            <!-- UUID QR Code -->
            <div style="text-align: center;">
                <h3>{% trans 'User UUID QR Code' %}</h3>
                <p style="color: #666; font-size: 12px; margin-bottom: 10px;">
                    {% trans 'Scan this QR code with the mobile app to link your account' %}
                </p>
                <img src="data:image/png;base64,{{ uuid_qr }}" 
                     alt="{% trans 'UUID QR Code' %}" 
                     style="border: 2px solid #ccc; border-radius: 10px; max-width: 300px;"/>
                <p style="margin-top: 10px; font-family: monospace; font-size: 12px; word-break: break-all;">
                    {{ user.id }}
                </p>
            </div>

            <!-- Profile URL QR Code -->
            <div style="text-align: center;">
                <h3>{% trans 'Profile URL QR Code' %}</h3>
                <p style="color: #666; font-size: 12px; margin-bottom: 10px;">
                    {% trans 'Scan this QR code to visit the user profile page' %}
                </p>
                <img src="data:image/png;base64,{{ url_qr }}" 
                     alt="{% trans 'Profile URL QR Code' %}" 
                     style="border: 2px solid #ccc; border-radius: 10px; max-width: 300px;"/>
                <p style="margin-top: 10px; font-family: monospace; font-size: 12px; word-break: break-all;">
                    {{ profile_url }}
                </p>
            </div>
        </div>
    </div>

    <div class="submit-row" style="margin-top: 20px;">
        <a href="{% url 'admin:main_user_add' %}" class="default" style="text-decoration: none; margin-right: 10px;">
            {% trans 'Create Another User' %}
        </a>
        <a href="{% url 'admin:main_user_change' user.id %}" class="button" style="text-decoration: none; margin-right: 10px;">
            {% trans 'Edit User' %}
        </a>
        <a href="{% url 'admin:main_user_changelist' %}" class="button" style="text-decoration: none;">
            {% trans 'Back to List' %}
        </a>
    </div>
</div>
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    #content-main {
        max-width: 900px;
    }
    .module {
        background: var(--darkened-bg);
        border-radius: 4px;
    }
    .form-row {
        padding: 10px;
        border-bottom: 1px solid var(--hairline-color);
    }
    .form-row:last-child {
        border-bottom: none;
    }
    .fieldBox {
        display: flex;
        align-items: center;
    }
    .fieldBox label {
        min-width: 150px;
        font-weight: bold;
    }
    .readonly {
        background: var(--body-bg);
        padding: 8px 12px;
        border-radius: 4px;
        flex: 1;
    }
    h2 {
        background: var(--primary);
        color: var(--header-link-color);
        padding: 12px;
        margin: 0;
        border-radius: 4px 4px 0 0;
    }
    h3 {
        color: var(--body-fg);
        margin-bottom: 10px;
    }
</style>
{% endblock %}
